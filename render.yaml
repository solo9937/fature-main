import telebot
from telebot import types
import sqlite3
import random
import time
import re
import requests
import json
from datetime import datetime, timedelta
import threading
import schedule
import pytz

# إعدادات البوت
TOKEN = '8442527632:AAGvcybl20W3qFP_itrO1-FJ2vaAEpyq2Qo'
bot = telebot.TeleBot(TOKEN)

# بيانات المطور
DEVELOPER_ID = 7722416548
DEVELOPER_USERNAME = '@Solo_sn'

# قناة الاشتراك الإجباري
FORCE_SUB_CHANNEL = None

# قاعدة البيانات
conn = sqlite3.connect('bot_data.db', check_same_thread=False)
cursor = conn.cursor()

# إنشاء الجداول
cursor.execute('''
CREATE TABLE IF NOT EXISTS users (
    user_id INTEGER PRIMARY KEY,
    username TEXT,
    balance INTEGER DEFAULT 1000,
    bank_balance INTEGER DEFAULT 0,
    rank TEXT DEFAULT 'عضو',
    joined_date DATETIME DEFAULT CURRENT_TIMESTAMP
)
''')

cursor.execute('''
CREATE TABLE IF NOT EXISTS items (
    item_id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT,
    price INTEGER,
    category TEXT
)
''')

cursor.execute('''
CREATE TABLE IF NOT EXISTS user_items (
    user_id INTEGER,
    item_id INTEGER,
    purchase_date DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users (user_id),
    FOREIGN KEY (item_id) REFERENCES items (item_id)
)
''')

cursor.execute('''
CREATE TABLE IF NOT EXISTS channels (
    channel_id TEXT PRIMARY KEY,
    channel_name TEXT
)
''')

cursor.execute('''
CREATE TABLE IF NOT EXISTS ai_responses (
    keyword TEXT PRIMARY KEY,
    responses TEXT
)
''')

# إضافة بعض العناصر إلى المتجر
default_items = [
    ('سيارة', 5000, 'مركبات'),
    ('طائرة', 15000, 'مركبات'),
    ('ملعب', 30000, 'عقارات'),
    ('لعبة', 1000, 'ترفيه'),
    ('منزل', 45000, 'عقارات'),
    ('يخت', 25000, 'مركبات'),
    ('دبابة', 30000, 'مركبات'),
    ('دراجة نارية', 3000, 'مركبات'),
    ('قصر', 100000, 'عقارات'),
    ('جزيرة', 500000, 'عقارات')
]

cursor.executemany('INSERT OR IGNORE INTO items (name, price, category) VALUES (?, ?, ?)', default_items)

# إضافة ردود الذكاء الاصطناعي الأساسية
default_responses = [
    ('مرحبا', 'أهلاً وسهلاً! 😊|مرحباً بك! 🤗|أهلاً بك! كيف يمكنني مساعدتك؟ 🎉'),
    ('اهلا', 'أهلاً وسهلاً! 😊|مرحباً بك! 🤗|أهلاً بك! 🎉'),
    ('السلام عليكم', 'وعليكم السلام ورحمة الله وبركاته 🙏|وعليكم السلام 🌷|اهلاً وسهلاً 🤗'),
    ('كيف حالك', 'بخير والحمدلله 🙏|الحمدلله دائماً 🌹|أنا بخير، شكراً لسؤالك! 😄'),
    ('شكرا', 'العفو! 😇|لا شكر على واجب 🌷|أنت دائماً welcome! 🤝'),
    ('احبك', 'أنا أيضاً أحبك! ❤️|شكراً للحب! 💕|هذا لطف منك! 🌸'),
    ('مساء الخير', 'مساء النور! 🌙|مساء الخير! 🌄|مساء الورد! 🌺'),
    ('صباح الخير', 'صباح النور! ☀️|صباح الخير! 🌅|صباح الورد! 🌷'),
    ('hello', 'Hello! 👋|Hi there! 😄|Welcome! 🌟'),
    ('hi', 'Hi! 👋|Hello! 😊|Hey there! 🎯'),
    ('كيفك', 'بخير والحمدلله 🙏|الحمدلله 🌹|أنا بخير، شكراً! 😄'),
    ('صباح النور', 'صباح الفل! 🌸|صباح الخير! ☀️|صباح الورد! 🌷'),
    ('مساء النور', 'مساء الخير! 🌙|مساء الورد! 🌺|مساء الأنوار! ✨'),
    ('تمام', 'الحمدلله 🙏|الله يسلمك 🌹|دايماً 🌟'),
    ('بوت', 'نعم؟ 😊|تفضل 👋|كيف يمكنني مساعدتك؟ 🎯'),
    ('هاي', 'هاي! 👋|أهلاً! 😊|مرحباً! 🤗'),
    ('morning', 'Good morning! ☀️|Morning! 🌅|صباح الخير! 🌷'),
    ('evening', 'Good evening! 🌙|Evening! 🌄|مساء الخير! 🌺'),
    ('night', 'Good night! 🌙|Night! 😴|تصبح على خير! 🌟'),
    ('احا', 'يا باشا متقولش كده 😅|يا عم ده مش كلام كويس 🙊|خليك محترم يا صاحبي 😄'),
    ('ازيك', 'الحمدلله وانت ازيك؟ 😊|تمام والحمدلله 🌹|انا كويس ياه 🌟'),
    ('هلا', 'هلا فيك 🌟|هلا والله 🤗|هلا وغلا 🎉'),
    ('وين', 'هنا حاضر 😊|جاهز لخدمتك 🌟|تحدث 🤗'),
    ('شباب', 'هووووووووووع 🎉|ياااااااااه 🌟|شباب ايه يا باشا 😄'),
    ('يا جماعه', 'يااااااه 🌟|ايه الامر يا نجم 😊|قول 👋'),
    ('ok', 'OK 👍|تمام 🌟|اتفقنا 🤝'),
    ('yes', 'Nice! 👍|أهلاً وسهلاً 🌟|تمام 🤗'),
    ('no', 'ليه؟ 😕|خلاص 😐|حاضر 🌹'),
    ('خلاص', 'تمام 🌟|اتفقنا 🤝|يا رب دايماً 🌹'),
    ('يعني', 'يعني ايه؟ 🤔|وضح اكتر 🧐|فهمني اكتر 📚'),
    ('طب', 'قول يا صاحبي 😊|نعم 🤗|تفضل 🌟'),
    ('يا رجل', 'يا باشا 😄|قول يا نجم 🌟|تفضل 🤗'),
    ('والله', 'والله العظيم 🌟|صدقني 🤝|بأمانة 🌹'),
    ('صدقني', 'مصدقك 🌟|طبعاً 🤗|مش شك فيك 😊'),
    ('فعلا', 'أكيد 🌟|طبعاً 🤗|صح كلامك 👍'),
    ('صح', 'صح 🌟|أهلاً وسهلاً 👍|تمام 🤗'),
    ('غلط', 'ممكن توضح؟ 🤔|ليه غلط؟ 🧐|قول لي الصح 🌟'),
    ('ماشي', 'ماشي يا غالي 🌟|تمام 🤗|اتفقنا 👍'),
    ('ان شاء الله', 'ان شاء الله 🌹|ربنا يسمع منك 🙏|بإذن الله 🌟'),
    ('ما شاء الله', 'ما شاء الله 🌟|ربنا يبارك 🙏|الله 🤗'),
    ('الحمد لله', 'الحمد لله دائماً 🙏|الله 🌟|نعمت الله 🌹'),
    ('ربنا', 'ربنا معاك 🙏|الله 🌟|بإذن الله 🌹'),
    ('يسطا', 'يا باشa 😄|قول يا نجم 🌟|تفضل 🤗'),
    ('يا حبيبي', 'يا غالي 🌹|يا روحي ❤️|يا قلبي 💕'),
    ('عاش', 'عاش يا غالي 🌟|ياااااه 🎉|برافo 👏'),
    ('برافو', 'برافو عليك 👏|شاطر 🌟|تحفة 🎉'),
    ('تحفة', 'انت التحفة 🌟|يا فنان 🎨|برافو 👏'),
    ('مبدع', 'انت المبدع 🌟|برافo 👏|شاطر 🎉'),
    ('شاطر', 'انت الشاطر 🌟|برافo 👏|مبدع 🎉'),
    ('genius', 'You are the genius! 🌟|Smart! 🧠|Brilliant! 👏'),
    ('مش عارف', 'خلينا نساعدك 🤗|قوللي عاوز إيه 🌟|تفضل اسأل 😊'),
    ('بتعمل ايه', 'بخدمك يا صاحبي 😊|قاعد بشتغل 🌟|جاهز ليك 🤗'),
    ('عامل ايه', 'الحمدلله وانت عامل ايه؟ 😊|كويس يا غالي 🌹|تمام والحمدلله 🌟'),
    ('قاعد', 'قاعد بشتغل 🌟|جاهز لخدمتك 🤗|present 😊'),
    ('نايم', 'صحى يا نايم 🌅|قوم نشتغل 🌟|morning ☀️'),
    ('good', 'Good for you! 👍|Nice! 🌟|Great! 🎉'),
    ('nice', 'Nice! 🌟|Great! 🎉|Awesome! 👍'),
    ('great', 'Great! 🎉|Awesome! 👍|Amazing! 🌟'),
    ('awesome', 'Awesome! 👍|Amazing! 🌟|Fantastic! 🎉'),
    ('ممتاز', 'ممتاز يا غالي 🌟|برافo 👏|تحفة 🎉'),
    ('رائع', 'رائع يا غالي 🌟|برافo 👏|تحفة 🎉'),
    ('جميل', 'انت الأجمل 🌟|يا جميل 🌹|حلو 🎉'),
    ('حلو', 'انت الأحلى 🌟|يا حلو 🌹|جميل 🎉'),
    ('عظيم', 'عظيم يا غالي 🌟|ربنا يبارك 🙏|ما شاء الله 🌹'),
    ('perfect', 'Perfect! 🌟|Excellent! 🎉|Great! 👍'),
    ('excellent', 'Excellent! 🎉|Perfect! 🌟|Great! 👍'),
    ('fantastic', 'Fantastic! 🎉|Awesome! 👍|Great! 🌟'),
    ('amazing', 'Amazing! 🌟|Wonderful! 🎉|Great! 👍'),
    ('wonderful', 'Wonderful! 🎉|Amazing! 🌟|Great! 👍'),
    ('beautiful', 'You are beautiful! 🌹|Gorgeous! 🌟|Lovely! 💕'),
    ('gorgeous', 'You are gorgeous! 🌟|Beautiful! 🌹|Stunning! 💕'),
    ('stunning', 'You are stunning! 💕|Gorgeous! 🌟|Beautiful! 🌹'),
    ('handsome', 'You are handsome! 🌟|Looking good! 👍|Great! 🎉'),
    ('cool', 'Cool! 😎|Awesome! 👍|Great! 🌟'),
    ('hot', 'Hot! 🔥|Amazing! 🌟|Great! 🎉'),
    ('sexy', 'Sexy! 💋|Beautiful! 🌹|Gorgeous! 🌟'),
    ('love', 'Love you too! ❤️|Aww! 💕|Sweet! 🌸'),
    ('like', 'I like you too! 😊|Aww! 💕|Sweet! 🌸'),
    ('miss', 'I miss you too! 💕|Aww! 🌸|Sweet! ❤️'),
    ('thinking', 'What are you thinking about? 🤔|Share your thoughts! 🧠|Tell me! 📚'),
    ('sad', 'Don\'t be sad! 😢|Cheer up! 🌟|I\'m here for you! 🤗'),
    ('happy', 'I\'m happy for you! 😄|Great! 🌟|Awesome! 🎉'),
    ('angry', 'Calm down! 🧘|Take it easy! 🌸|Relax! 🌹'),
    ('tired', 'Take some rest! 😴|Relax! 🌸|You deserve it! 🌟'),
    ('busy', 'I understand! 🤗|Good luck! 🌟|Take care! 🌹'),
    ('sick', 'Get well soon! 🌸|I hope you feel better! 🌹|Take care! 🤗'),
    ('bored', 'Let\'s do something fun! 🎮|I\'m here to entertain you! 🎉|What would you like to do? 🤗'),
    ('hungry', 'Go eat something! 🍕|Food time! 🍔|Enjoy your meal! 🍟'),
    ('thirsty', 'Drink some water! 💧|Stay hydrated! 🥤|Take care! 🌸'),
    ('sleep', 'Good night! 🌙|Sweet dreams! 😴|Sleep well! 🌟'),
    ('awake', 'Good morning! ☀️|Welcome back! 🌟|How are you? 😊'),
    ('here', 'I\'m here for you! 🤗|Welcome back! 🌟|How can I help? 😊'),
    ('alone', 'You\'re not alone! 🤗|I\'m here with you! 🌟|We can talk! 💕'),
    ('friend', 'I\'m your friend! 🤗|We are friends! 🌟|Friends forever! 💕'),
    ('best', 'You\'re the best! 🌟|Awesome! 🎉|Great! 👍'),
    ('worst', 'Don\'t say that! 😢|You\'re amazing! 🌟|Cheer up! 🤗'),
    ('crazy', 'We\'re all a little crazy! 😜|That\'s fun! 🎉|Haha! 😄'),
    ('funny', 'You\'re funny! 😄|Haha! 🎉|LOL! 🤣'),
    ('joke', 'Why did the chicken cross the road? 🐔|Haha! 😄|Let me think of a joke! 🤔'),
    ('laugh', 'Hahaha! 🤣|LOL! 😄|😂'),
    ('smile', 'Keep smiling! 😊|You have a beautiful smile! 🌟|😊'),
    ('cry', 'Don\'t cry! 😢|I\'m here for you! 🤗|Cheer up! 🌟'),
    ('win', 'Congratulations! 🎉|You won! 🌟|Victory! 👍'),
    ('lose', 'Don\'t worry! 🤗|Next time! 🌟|You\'ll win soon! 👍'),
    ('play', 'Let\'s play! 🎮|What game? 🎯|Fun time! 🎉'),
    ('game', 'I love games! 🎮|Which game? 🎯|Let\'s play! 🎉'),
    ('music', 'I love music! 🎵|What\'s your favorite song? 🎶|Nice! 🎵'),
    ('song', 'What song? 🎵|I love songs! 🎶|Nice! 🎵'),
    ('movie', 'What movie? 🎬|I love movies! 🍿|Nice! 🎬'),
    ('book', 'What book? 📚|I love reading! 📖|Nice! 📚'),
    ('read', 'Reading is great! 📚|What are you reading? 📖|Nice! 📚'),
    ('write', 'Writing is awesome! 📝|What are you writing? ✍️|Nice! 📝'),
    ('draw', 'Drawing is fun! 🎨|Show me your art! ✏️|Nice! 🎨'),
    ('art', 'Art is beautiful! 🎨|I love art! 🖼️|Nice! 🎨'),
    ('sport', 'Sports are great! ⚽|What sport? 🏀|Nice! 🏈'),
    ('football', 'I love football! ⚽|What team? 🏆|Nice! ⚽'),
    ('basketball', 'I love basketball! 🏀|What team? 🏆|Nice! 🏀'),
    ('swim', 'Swimming is fun! 🏊|I love swimming! 🌊|Nice! 🏊'),
    ('run', 'Running is great! 🏃|Keep running! 🌟|Nice! 🏃'),
    ('walk', 'Walking is healthy! 🚶|Keep walking! 🌟|Nice! 🚶'),
    ('travel', 'Traveling is awesome! ✈️|Where are you going? 🗺️|Nice! ✈️'),
    ('car', 'Cars are cool! 🚗|What car? 🏎️|Nice! 🚗'),
    ('plane', 'Planes are amazing! ✈️|I love flying! 🛫|Nice! ✈️'),
    ('boat', 'Boats are fun! ⛵|I love sailing! 🌊|Nice! ⛵'),
    ('train', 'Trains are great! 🚂|I love trains! 🛤️|Nice! 🚂'),
    ('computer', 'Computers are awesome! 💻|I love technology! 🖥️|Nice! 💻'),
    ('phone', 'Phones are useful! 📱|I love smartphones! 📲|Nice! 📱'),
    ('internet', 'The internet is amazing! 🌐|I love the web! 💻|Nice! 🌐'),
    ('technology', 'Technology is great! 🔧|I love tech! 💻|Nice! 🔧'),
    ('science', 'Science is awesome! 🔬|I love science! 🧪|Nice! 🔬'),
    ('math', 'Math is fun! ➕|I love numbers! 🔢|Nice! ➕'),
    ('school', 'School is important! 🎓|Study hard! 📚|Nice! 🎓'),
    ('work', 'Work hard! 💼|Good luck! 🌟|Nice! 💼'),
    ('job', 'Jobs are important! 💼|Good luck! 🌟|Nice! 💼'),
    ('money', 'Money is useful! 💵|Save your money! 💰|Nice! 💵'),
    ('rich', 'Being rich is great! 💎|Work hard! 💼|Nice! 💎'),
    ('poor', 'Don\'t worry! 🤗|Things will get better! 🌟|I\'m here for you! 💕'),
    ('help', 'I\'m here to help! 🤗|What do you need? 🌟|How can I assist? 😊'),
    ('need', 'What do you need? 🤗|I\'m here to help! 🌟|Tell me! 😊'),
    ('want', 'What do you want? 🤗|I\'m here to help! 🌟|Tell me! 😊'),
    ('wish', 'What do you wish for? 🌟|I hope it comes true! ✨|Good luck! 🤗'),
    ('dream', 'Follow your dreams! 🌟|I believe in you! ✨|Good luck! 🤗'),
    ('hope', 'I hope so too! 🌟|Good luck! 🤗|Best wishes! ✨'),
    ('pray', 'I\'ll pray for you! 🙏|God bless you! 🌟|Best wishes! ✨'),
    ('god', 'God bless you! 🙏|Have faith! 🌟|Best wishes! ✨'),
    ('faith', 'Keep the faith! 🙏|Believe! 🌟|Best wishes! ✨'),
    ('believe', 'I believe in you! 🌟|You can do it! 👍|Best wishes! ✨'),
    ('trust', 'Trust yourself! 🌟|You can do it! 👍|Best wishes! ✨'),
    ('confidence', 'Be confident! 🌟|You are amazing! 👍|Best wishes! ✨'),
    ('success', 'Success is coming! 🌟|You will succeed! 👍|Best wishes! ✨'),
    ('achieve', 'You will achieve! 🌟|Keep going! 👍|Best wishes! ✨'),
    ('goal', 'Reach your goals! 🌟|You can do it! 👍|Best wishes! ✨'),
    ('future', 'The future is bright! 🌟|Good luck! 👍|Best wishes! ✨'),
    ('past', 'Learn from the past! 📚|Focus on the future! 🌟|Best wishes! ✨'),
    ('present', 'Live in the present! 🌟|Enjoy now! 👍|Best wishes! ✨'),
    ('time', 'Time is precious! ⏰|Use it wisely! 🌟|Best wishes! ✨'),
    ('life', 'Life is beautiful! 🌟|Enjoy it! 👍|Best wishes! ✨'),
    ('world', 'The world is amazing! 🌍|Explore it! 🌟|Best wishes! ✨'),
    ('universe', 'The universe is vast! 🌌|We are small! 🌟|Best wishes! ✨'),
    ('star', 'You are a star! 🌟|Shine bright! ✨|Best wishes! 👍'),
    ('moon', 'The moon is beautiful! 🌙|Shine like the moon! ✨|Best wishes! 👍'),
    ('sun', 'The sun is bright! ☀️|Shine like the sun! ✨|Best wishes! 👍'),
    ('sky', 'The sky is vast! 🌌|Reach for the sky! 🌟|Best wishes! ✨'),
    ('sea', 'The sea is deep! 🌊|Dive deep! 🌟|Best wishes! ✨'),
    ('ocean', 'The ocean is vast! 🌊|Explore it! 🌟|Best wishes! ✨'),
    ('mountain', 'Mountains are high! ⛰️|Climb high! 🌟|Best wishes! ✨'),
    ('river', 'Rivers flow! 🌊|Go with the flow! 🌟|Best wishes! ✨'),
    ('forest', 'Forests are green! 🌲|Enjoy nature! 🌟|Best wishes! ✨'),
    ('nature', 'Nature is beautiful! 🌳|Protect it! 🌟|Best wishes! ✨'),
    ('animal', 'Animals are amazing! 🐾|Love them! 🌟|Best wishes! ✨'),
    ('dog', 'Dogs are loyal! 🐶|I love dogs! 🌟|Best wishes! ✨'),
    ('cat', 'Cats are cute! 🐱|I love cats! 🌟|Best wishes! ✨'),
    ('bird', 'Birds fly high! 🐦|Fly high! 🌟|Best wishes! ✨'),
    ('fish', 'Fish swim! 🐟|Swim deep! 🌊|Best wishes! ✨'),
    ('food', 'Food is delicious! 🍕|Enjoy your meal! 🍔|Best wishes! ✨'),
    ('pizza', 'Pizza is yummy! 🍕|I love pizza! 🌟|Best wishes! ✨'),
    ('burger', 'Burgers are tasty! 🍔|I love burgers! 🌟|Best wishes! ✨'),
    ('ice cream', 'Ice cream is sweet! 🍦|I love ice cream! 🌟|Best wishes! ✨'),
    ('chocolate', 'Chocolate is delicious! 🍫|I love chocolate! 🌟|Best wishes! ✨'),
    ('coffee', 'Coffee is energizing! ☕|I love coffee! 🌟|Best wishes! ✨'),
    ('tea', 'Tea is relaxing! 🍵|I love tea! 🌟|Best wishes! ✨'),
    ('water', 'Water is life! 💧|Stay hydrated! 🌟|Best wishes! ✨'),
    ('health', 'Health is wealth! 🌟|Take care! 🤗|Best wishes! ✨'),
    ('fitness', 'Fitness is important! 💪|Stay fit! 🌟|Best wishes! ✨'),
    ('exercise', 'Exercise is good! 🏋️|Keep moving! 🌟|Best wishes! ✨'),
    ('yoga', 'Yoga is peaceful! 🧘|Keep practicing! 🌟|Best wishes! ✨'),
    ('meditate', 'Meditation is calming! 🧘|Keep practicing! 🌟|Best wishes! ✨'),
    ('relax', 'Relaxation is important! 🌸|Take it easy! 🌟|Best wishes! ✨'),
    ('stress', 'Don\'t stress! 🌸|Relax! 🌟|Best wishes! ✨'),
    ('peace', 'Peace is precious! ☮️|Spread peace! 🌟|Best wishes! ✨'),
    ('war', 'War is bad! ☮️|Pray for peace! 🙏|Best wishes! ✨'),
    ('kindness', 'Kindness is powerful! 🌟|Be kind! 🤗|Best wishes! ✨'),
    ('compassion', 'Compassion is important! 🌟|Be compassionate! 🤗|Best wishes! ✨'),
    ('empathy', 'Empathy is valuable! 🌟|Be empathetic! 🤗|Best wishes! ✨'),
    ('gratitude', 'Gratitude is key! 🌟|Be grateful! 🙏|Best wishes! ✨'),
    ('humility', 'Humility is virtue! 🌟|Be humble! 🤗|Best wishes! ✨'),
    ('honesty', 'Honesty is best! 🌟|Be honest! 👍|Best wishes! ✨'),
    ('integrity', 'Integrity is important! 🌟|Have integrity! 👍|Best wishes! ✨'),
    ('respect', 'Respect is earned! 🌟|Be respectful! 👍|Best wishes! ✨'),
    ('dignity', 'Dignity is precious! 🌟|Have dignity! 👍|Best wishes! ✨'),
    ('honor', 'Honor is valuable! 🌟|Have honor! 👍|Best wishes! ✨'),
    ('courage', 'Courage is brave! 🌟|Be courageous! 💪|Best wishes! ✨'),
    ('bravery', 'Bravery is heroic! 🌟|Be brave! 💪|Best wishes! ✨'),
    ('strength', 'Strength is powerful! 💪|Be strong! 🌟|Best wishes! ✨'),
    ('wisdom', 'Wisdom is precious! 🧠|Be wise! 🌟|Best wishes! ✨'),
    ('knowledge', 'Knowledge is power! 📚|Keep learning! 🌟|Best wishes! ✨'),
    ('learning', 'Learning is endless! 📚|Keep learning! 🌟|Best wishes! ✨'),
    ('education', 'Education is key! 🎓|Study hard! 🌟|Best wishes! ✨'),
    ('teacher', 'Teachers are important! 👨‍🏫|Respect teachers! 🌟|Best wishes! ✨'),
    ('student', 'Students are future! 👨‍🎓|Study hard! 🌟|Best wishes! ✨'),
    ('university', 'University is great! 🎓|Study hard! 🌟|Best wishes! ✨'),
    ('college', 'College is fun! 🎓|Enjoy it! 🌟|Best wishes! ✨'),
    ('degree', 'Degrees are valuable! 🎓|Work hard! 🌟|Best wishes! ✨'),
    ('diploma', 'Diplomas are achievements! 🎓|Congratulations! 🌟|Best wishes! ✨'),
    ('certificate', 'Certificates are proof! 📜|Well done! 🌟|Best wishes! ✨'),
    ('award', 'Awards are recognition! 🏆|Congratulations! 🌟|Best wishes! ✨'),
    ('prize', 'Prizes are rewards! 🏆|Well done! 🌟|Best wishes! ✨'),
    ('competition', 'Competitions are challenging! 🏆|Good luck! 🌟|Best wishes! ✨'),
    ('practice', 'Practice makes perfect! 🌟|Keep practicing! 👍|Best wishes! ✨'),
    ('improve', 'Improvement is progress! 🌟|Keep improving! 👍|Best wishes! ✨'),
    ('progress', 'Progress is growth! 🌟|Keep progressing! 👍|Best wishes! ✨'),
    ('grow', 'Growth is life! 🌟|Keep growing! 👍|Best wishes! ✨'),
    ('change', 'Change is constant! 🌟|Embrace change! 👍|Best wishes! ✨'),
    ('evolve', 'Evolution is natural! 🌟|Keep evolving! 👍|Best wishes! ✨'),
    ('transform', 'Transformation is powerful! 🌟|Transform yourself! 👍|Best wishes! ✨'),
    ('become', 'Become better! 🌟|You can do it! 👍|Best wishes! ✨'),
    ('be', 'Be yourself! 🌟|You are amazing! 👍|Best wishes! ✨'),
    ('do', 'Do your best! 🌟|You can do it! 👍|Best wishes! ✨'),
    ('make', 'Make it happen! 🌟|You can do it! 👍|Best wishes! ✨'),
    ('create', 'Creation is art! 🎨|Create something! 🌟|Best wishes! ✨'),
    ('innovate', 'Innovation is future! 💡|Keep innovating! 🌟|Best wishes! ✨'),
    ('invent', 'Invention is progress! 💡|Keep inventing! 🌟|Best wishes! ✨'),
    ('discover', 'Discovery is exciting! 🔍|Keep discovering! 🌟|Best wishes! ✨'),
    ('explore', 'Exploration is adventure! 🗺️|Keep exploring! 🌟|Best wishes! ✨'),
    ('adventure', 'Adventure is fun! 🏔️|Have adventures! 🌟|Best wishes! ✨'),
    ('journey', 'Journey is life! 🛣️|Enjoy the journey! 🌟|Best wishes! ✨'),
    ('trip', 'Trips are fun! 🧳|Have fun! 🌟|Best wishes! ✨'),
    ('vacation', 'Vacations are relaxing! 🏖️|Enjoy! 🌟|Best wishes! ✨'),
    ('holiday', 'Holidays are joyful! 🎄|Happy holidays! 🌟|Best wishes! ✨'),
    ('festival', 'Festivals are festive! 🎉|Happy festival! 🌟|Best wishes! ✨'),
    ('celebration', 'Celebrations are happy! 🎊|Celebrate! 🌟|Best wishes! ✨'),
    ('party', 'Parties are fun! 🎈|Enjoy the party! 🌟|Best wishes! ✨'),
    ('fun', 'Fun is important! 🎉|Have fun! 🌟|Best wishes! ✨'),
    ('enjoy', 'Enjoyment is key! 😊|Enjoy! 🌟|Best wishes! ✨'),
    ('joy', 'Joy is precious! 😊|Spread joy! 🌟|Best wishes! ✨'),
    ('humor', 'Humor is great! 😄|Be humorous! 🌟|Best wishes! ✨'),
    ('comedy', 'Comedy is entertaining! 😄|I love comedy! 🌟|Best wishes! ✨'),
    ('drama', 'Drama is intense! 🎭|I love drama! 🌟|Best wishes! ✨'),
    ('film', 'Films are art! 🎥|I love films! 🌟|Best wishes! ✨'),
    ('cinema', 'Cinema is magic! 🎬|I love cinema! 🌟|Best wishes! ✨'),
]

for keyword, responses in default_responses:
    cursor.execute('INSERT OR IGNORE INTO ai_responses (keyword, responses) VALUES (?, ?)', (keyword, responses))

conn.commit()

# رتب البوت
RANKS = {
    'عضو': 0,
    'مميز': 1,
    'ادمن': 2,
    'مدير': 3,
    'مالك': 4,
    'مالك اساسي': 5
}

# دالة للتحقق من صلاحية الرتبة
def check_rank(user_id, required_rank):
    cursor.execute('SELECT rank FROM users WHERE user_id = ?', (user_id,))
    result = cursor.fetchone()
    if result:
        user_rank = result[0]
        return RANKS.get(user_rank, 0) >= RANKS.get(required_rank, 0)
    return False

# دالة للتحقق من حالة الاشتراك في القناة
def check_subscription(user_id):
    if not FORCE_SUB_CHANNEL:
        return True
    
    try:
        member = bot.get_chat_member(FORCE_SUB_CHANNEL, user_id)
        return member.status in ['member', 'administrator', 'creator']
    except:
        return False

# دالة للحصول على رد ذكي
def get_ai_response(text):
    text = text.lower()
    
    # البحث عن كلمة مفتاحية في النص
    cursor.execute('SELECT keyword, responses FROM ai_responses')
    all_responses = cursor.fetchall()
    
    for keyword, responses in all_responses:
        if keyword in text:
            response_list = responses.split('|')
            return random.choice(response_list)
    
    # إذا لم يتم العثور على رد مناسب
    default_responses = [
        "هذا مثير للاهتمام، أخبرني المزيد 📚",
        "أنا أتعلم كل يوم، يمكنك تعليمي أشياء جديدة 🌟",
        "رائع! هل لديك المزيد لتقوله؟ 🎉",
        "لم أفهم ما تقصد، هل يمكنك التوضيح أكثر؟ 🤔",
        "مممم، لا أعرف كيف أرد على هذا 🧐"
    ]
    return random.choice(default_responses)

# دالة لمنح مكافأة يومية
def daily_bonus():
    cursor.execute('UPDATE users SET balance = balance + 500 WHERE balance < 100000')
    conn.commit()

# جدولة المكافأة اليومية
schedule.every().day.at("00:00").do(daily_bonus)

# تشغيل الجدولة في الخلفية
def run_scheduler():
    while True:
        schedule.run_pending()
        time.sleep(60)

scheduler_thread = threading.Thread(target=run_scheduler)
scheduler_thread.daemon = True
scheduler_thread.start()

# الأوامر الأساسية
@bot.message_handler(commands=['start'])
def send_welcome(message):
    user_id = message.from_user.id
    user_name = message.from_user.first_name
    
    # التحقق من الاشتراك في القناة
    if not check_subscription(user_id):
        markup = types.InlineKeyboardMarkup()
        markup.add(types.InlineKeyboardButton("اشترك في القناة", url=f"https://t.me/{FORCE_SUB_CHANNEL[1:]}"))
        markup.add(types.InlineKeyboardButton("تأكيد الاشتراك", callback_data="check_subscription"))
        bot.send_message(message.chat.id, f"عذراً {user_name}، يجب الاشتراك في القناة أولاً:", reply_markup=markup)
        return
    
    # إضافة المستخدم إلى قاعدة البيانات إذا لم يكن موجوداً
    cursor.execute('INSERT OR IGNORE INTO users (user_id, username) VALUES (?, ?)', (user_id, user_name))
    conn.commit()
    
    # إرسال رسالة ترحيب مع أزرار
    markup = types.ReplyKeyboardMarkup(row_width=2,